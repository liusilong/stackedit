


> Written with [StackEdit](https://stackedit.io/).

## 如何防止单例被反射，克隆，序列化
[原文链接](https://www.geeksforgeeks.org/prevent-singleton-pattern-reflection-serialization-cloning/)

这本文中，我们想看到如何破坏单利模式以及如何避免的方法。这里主要有3个概念打破一个类的单例属性，我们一个一个的往下看：

### 反射
反射可以破坏一个类的单利的属性，如下：

```java
public class BrokenSingleton {  
    public static void main(String[] args) throws Exception{  
        Singleton instance1 = Singleton.instance;  
        Singleton instance2 = null;  
        Constructor<?>[] constructors = Singleton.class.getDeclaredConstructors();  
        for (Constructor<?> constructor : constructors) {  
            constructor.setAccessible(true);  
            instance2 = (Singleton) constructor.newInstance();  
            break;  
        }  
  
        System.out.println("instance1.hashCode(): " + instance1.hashCode());  
        System.out.println("instance2.hashCode(): " + instance2.hashCode());  
    }  
}  
 
// 单例类
class Singleton {  
    public static Singleton instance = new Singleton();  
    private Singleton(){  
  
    }  
}
```
<!--stackedit_data:
eyJoaXN0b3J5IjpbLTE1OTM2NjUyODksLTExMTQwNzE0NzldfQ
==
-->